{"filter":false,"title":"js 避難","tooltip":"/.c9/js 避難","undoManager":{"mark":20,"position":20,"stack":[[{"start":{"row":0,"column":0},"end":{"row":54,"column":1},"action":"insert","lines":["let result = document.getElementById(\"result\"); //ok","let data= \"\";","let is_calculator = false;","","/*window.onload = function () {"," result = document.getElementById('display');","};*/","","function ac(){"," result.value = \"0\";"," is_calculator = false;","}","","function num(value) {"," if (is_calculator) result.value = \"0\";"," is_calculator = false;"," "," if(result.value === \"0\" && value === \"0\"){","   result.value = \"0\";","  }/* else if(result.value == \"0\" && value == \"00\"){","   result.value = \"0\";","  }*/ else if(result.value === \"0\" && value === \".\"){","   result.value = \"0.\";","  }else if(result.value === \"0\"){","   result.value = value;","  }else{","   result.value += value;","  }","}","","function ope(val){   //ok"," if (is_calculator) is_calculator = false;"," "," if(is_ope_last()){","   result.value = result.value.slice(0,-1) + val;","  }else{","   result.value += val;"," }","}","","function equal(){"," if(is_ope_last()) result.value = result.value.slice(0.-1);"," result.value = new Function(\"return\" + result.value)();"," "," if(temp === Infinity || Number.isNaN(temp)){","   result.value = \"Error\";","  }else{","   result.value = temp;","   is_calculator = true;","  }","}","","function is_ope_last(){  //ok"," return[\"+\",\"-\",\"*\",\"/\"].includes(result.value.toString().slice(-1));","}"],"id":1}],[{"start":{"row":54,"column":1},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":56,"column":0},"end":{"row":76,"column":3},"action":"insert","lines":[" const num_btn = document.querySelectorAll('.num_btn');"," let display = document.getElementById('display')"," let result = 0;","  "," num_btn.forEach(index => {","  index.addEventListener('click', () => {","   console.log(index.dataset.indexId);","   if(result === 0){","      result = index.dataset.indexId;","   }else{","     result += index.dataset.indexId;","   }","    display.textContent = result;","  }) //click   "," })//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});"],"id":3}],[{"start":{"row":76,"column":3},"end":{"row":77,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":55,"column":0},"end":{"row":77,"column":0},"action":"remove","lines":[""," const num_btn = document.querySelectorAll('.num_btn');"," let display = document.getElementById('display')"," let result = 0;","  "," num_btn.forEach(index => {","  index.addEventListener('click', () => {","   console.log(index.dataset.indexId);","   if(result === 0){","      result = index.dataset.indexId;","   }else{","     result += index.dataset.indexId;","   }","    display.textContent = result;","  }) //click   "," })//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});",""],"id":5}],[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":57,"column":0},"end":{"row":77,"column":3},"action":"insert","lines":[" const num_btn = document.querySelectorAll('.num_btn');"," let display = document.getElementById('display')"," let result = 0;","  "," num_btn.forEach(index => {","  index.addEventListener('click', () => {","   console.log(index.dataset.indexId);","   if(result === 0){","      result = index.dataset.indexId;","   }else{","     result += index.dataset.indexId;","   }","    display.textContent = result;","  }) //click   "," })//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});"],"id":7}],[{"start":{"row":57,"column":0},"end":{"row":77,"column":3},"action":"remove","lines":[" const num_btn = document.querySelectorAll('.num_btn');"," let display = document.getElementById('display')"," let result = 0;","  "," num_btn.forEach(index => {","  index.addEventListener('click', () => {","   console.log(index.dataset.indexId);","   if(result === 0){","      result = index.dataset.indexId;","   }else{","     result += index.dataset.indexId;","   }","    display.textContent = result;","  }) //click   "," })//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});"],"id":8}],[{"start":{"row":57,"column":0},"end":{"row":77,"column":3},"action":"insert","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","  ","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});"],"id":9}],[{"start":{"row":57,"column":0},"end":{"row":77,"column":3},"action":"remove","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","  ","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});"],"id":10}],[{"start":{"row":57,"column":0},"end":{"row":90,"column":1},"action":"insert","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state = 'start';","  ","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}"],"id":11}],[{"start":{"row":90,"column":1},"end":{"row":91,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":91,"column":0},"end":{"row":92,"column":0},"action":"insert","lines":["",""]},{"start":{"row":92,"column":0},"end":{"row":93,"column":0},"action":"insert","lines":["",""]},{"start":{"row":93,"column":0},"end":{"row":94,"column":0},"action":"insert","lines":["",""]},{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"insert","lines":["",""]},{"start":{"row":95,"column":0},"end":{"row":96,"column":0},"action":"insert","lines":["",""]},{"start":{"row":96,"column":0},"end":{"row":97,"column":0},"action":"insert","lines":["",""]},{"start":{"row":97,"column":0},"end":{"row":98,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":98,"column":0},"end":{"row":156,"column":0},"action":"insert","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state = 'start';","  "," //1~9のボタンを押した時 ","const iwn = document.querySelectorAll('.iwn');","iwn.forEach(index => {"," index.addEventListener('click', () => {","  if(state === 'start') {","   //最初にresultに打った文字を代入する","   result = index.dataset.indexId;","  }","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}","","//演算子を最初に適用させない","const ope = document.querySelectorAll('.ope');","ope.forEach(index => {","  index.addEventListener('click',() => {","  if(state === 'start') {","   return;","  }","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;","   state = 'opeBtn'","  })","})",""],"id":13}],[{"start":{"row":98,"column":0},"end":{"row":156,"column":0},"action":"remove","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state = 'start';","  "," //1~9のボタンを押した時 ","const iwn = document.querySelectorAll('.iwn');","iwn.forEach(index => {"," index.addEventListener('click', () => {","  if(state === 'start') {","   //最初にresultに打った文字を代入する","   result = index.dataset.indexId;","  }","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}","","//演算子を最初に適用させない","const ope = document.querySelectorAll('.ope');","ope.forEach(index => {","  index.addEventListener('click',() => {","  if(state === 'start') {","   return;","  }","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;","   state = 'opeBtn'","  })","})",""],"id":14},{"start":{"row":97,"column":0},"end":{"row":98,"column":0},"action":"remove","lines":["",""]},{"start":{"row":96,"column":0},"end":{"row":97,"column":0},"action":"remove","lines":["",""]},{"start":{"row":95,"column":0},"end":{"row":96,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"remove","lines":["",""],"id":15}],[{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"insert","lines":["",""],"id":16},{"start":{"row":95,"column":0},"end":{"row":96,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":96,"column":0},"end":{"row":129,"column":1},"action":"insert","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state ='start';","","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}"],"id":17}],[{"start":{"row":129,"column":1},"end":{"row":130,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":130,"column":0},"end":{"row":131,"column":0},"action":"insert","lines":["",""]},{"start":{"row":131,"column":0},"end":{"row":132,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":132,"column":0},"end":{"row":230,"column":13},"action":"insert","lines":["const num_bth = document.querySelectorAll('.num_bth');","let display_main = document.getElementById('display_main'); //計算結果","const display_sub = document.getElementById('display_sub'); //計算途中","let result = 0;","let state ='start';","","/*num_bth.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach */","","//1から９の数字を押した時","const one_nine = document.querySelectorAll('.one_nine');","one_nine.forEach(index => {"," index.addEventListener('click', () => {","   if(state ==='start') {","     result = index.dataset.indexId;","  　}else if(state === 'finish') {","     reset();","     result = index.dataset.indexId;","    }else if(state === 'calculation'||state === 'calBtn') {","     result += index.dataset.indexId;","   }","   display_sub.textContent = result;","   state = 'calculation'"," }) //click   ","})//forEach","","//演算子ボタンを押した時","const cal = document.querySelectorAll('.cal');","cal.forEach(index => {"," index.addEventListener('click', () => {","  if(state ==='start') {","     return;","  }else if(state === 'calculation') {","    result += index.dataset.indexId;","  }else if(state === 'finish') {","    result = display_main.textContent","    result += index.dataset.indexId;","    display_main.textContent = 0","  }else if(state === 'calBtn') {","    result = result.slice(0,-1)","    result += index.dataset.indexId;","  }","  ","  display_sub.textContent = result;","  state = 'calBtn'"," }) //click   ","})//forEach","","//イコールボタンを押した時","const equal_btn = document.getElementById('equal_btn');","equal_btn.addEventListener('click',() =>{"," console.log(eval(result));"," display_main.textContent = eval(result);"," state = 'finish'","});","","//AC(リセット)ボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","//リセットを行う関数","function reset() {"," result = 0;"," display_main.textContent = 0;"," display_sub.textContent = 0;","}","","//0ボタンを押した時","//ゼロを最初に連続で押させないようにするため","const zero = document.getElementById('zero');","zero.addEventListener('click', () => {","//  最初state==='start","//  前の文字が0の時は0が入力できないようにする。","if(state==='start'||state==='calBtn'||state==='finish'){"," if(display_sub.textContent.slice(-1) === '0') {","    //sliceで切り出されたのは0ではなく'0'","    console.log('前の文字はゼロ');","    return;","  }"," }","if(state==='start') {","  result = zero.dataset.indexId;  "," }else{","   result += zero.dataset.indexId;  "," }","   display_sub.textContent = result;"," //state = 'calculation'//数字を入力している状態にする。 "," }) //click  "],"id":19}],[{"start":{"row":57,"column":0},"end":{"row":92,"column":0},"action":"remove","lines":["const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state = 'start';","  ","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}","",""],"id":20},{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"remove","lines":["",""]},{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":55,"column":0},"end":{"row":92,"column":1},"action":"remove","lines":["","","","","const num_btn = document.querySelectorAll('.num_btn');","let display = document.getElementById('display')","let result = 0;","let state ='start';","","num_btn.forEach(index => {"," index.addEventListener('click', () => {","  console.log(index.dataset.indexId);","  if(result === 0){","     result = index.dataset.indexId;","  }else{","    result += index.dataset.indexId;","  }","   display.textContent = result;"," }) //click   ","})//forEach ","","//イコールボタンを押した時","const equal = document.getElementById('equal');","equal.addEventListener('click',() =>{"," console.log(eval(result));"," display.textContent = eval(result);","});","","//ACボタンを押した時","const clear = document.getElementById('clear')","clear.addEventListener('click',() => {"," reset();","})","","function reset() {"," result = 0;"," display.textContent = 0;","}"],"id":21}]]},"ace":{"folds":[],"scrolltop":1671.2000000000005,"scrollleft":0,"selection":{"start":{"row":125,"column":38},"end":{"row":125,"column":38},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":118,"state":"start","mode":"ace/mode/text"}},"timestamp":1683443059358,"hash":"bdc3b2aaea5c657635f01072a60835c0808b2684"}